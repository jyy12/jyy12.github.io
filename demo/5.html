<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">




</head>
<body>

<button type="button" id="btn" >检测123</button>

<script>
//alert(document.body.ononline)
/*
try{
    alert(navigator.connection.type)
}catch(e){
    alert(e.message)
}
*/
/*
document.body.ononline=function(){
    alert('on')
}
document.body.onoffline=function(){
    alert('off')
}
*/
(function(win){
    var wifi;
    var ua = win.navigator.userAgent;
    var con = win.navigator.connection;
    // 如果是微信
    if(/MicroMessenger/.test(ua)){
        
        // 如果是微信6.0以上版本，用UA来判断
        if(/NetType/.test(ua)){
        
            var result = ua.match(/NetType\/(\S)+/)[0].replace('NetType/','');
            
            if(result && result != 'WIFI'){
                wifi = false;
            }else if(result && result=="WIFI"){
                wifi=true
            }
        // 如果是微信6.0以下版本，调用微信私有接口WeixinJSBridge
        }else{
            document.addEventListener("WeixinJSBridgeReady",function onBridgeReady(){
                WeixinJSBridge.invoke('getNetworkType',{},function(e){
                    if(e.err_msg != "network_type:wifi"){
                        wifi = false;
                    }else{
                        wifi = true;
                    }
                });
            });
        }
    // 如果支持navigator.connection
    }else if(con){
    
        var network = con.type;
        if(network == "wifi" || network == "2" || network == "unknown"){  // unknown是为了兼容Chrome Canary
            wifi = true;
        }else{
            wifi = false
        }
    }
    win.networkWIFI = wifi;
    alert(networkWIFI)
})(window);


</script>


</body>
</html>
