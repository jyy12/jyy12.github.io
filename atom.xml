<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Jin&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://jyy12.github.io/"/>
  <updated>2016-04-23T09:02:04.967Z</updated>
  <id>http://jyy12.github.io/</id>
  
  <author>
    <name>Jin&#39;s Blog</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>移动端返回上一页实现方法</title>
    <link href="http://jyy12.github.io/2016/03/26/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E9%A1%B5%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95/"/>
    <id>http://jyy12.github.io/2016/03/26/移动端返回上一页实现方法/</id>
    <published>2016-03-26T06:33:44.000Z</published>
    <updated>2016-04-23T09:02:04.967Z</updated>
    
    <content type="html">&lt;h1 id=&quot;一、问题描述&quot;&gt;&lt;a href=&quot;#一、问题描述&quot; class=&quot;headerlink&quot; title=&quot;一、问题描述:&quot;&gt;&lt;/a&gt;一、问题描述:&lt;/h1&gt;&lt;p&gt;　　使用window.history.go(-1)或者window.history.back(-1)实现移动端返回上一页功能，原生safair浏览器里存在问题（通过flex布局的上一张页面滚动无效，只能显示点击前停留的那屏，无法通过触摸滚动页面）。存在于ios 9.3(13E233)和ios9.3.1(13E238)系统,ios9.3其它版本未发现该问题，ios安装的其它浏览器不存在该问题，android也没有该问题。&lt;/p&gt;
&lt;h1 id=&quot;二、解决方案：&quot;&gt;&lt;a href=&quot;#二、解决方案：&quot; class=&quot;headerlink&quot; title=&quot;二、解决方案：&quot;&gt;&lt;/a&gt;二、解决方案：&lt;/h1&gt;&lt;p&gt;　　ios原生浏览器（ios其它浏览器不存在这种情况）下通过document.referrer实现返回上一页，部分手机的QQ内嵌浏览器使用document.referrer不能正常返回上一页，android下通过referrer属性实现时，当刷新页面后返回前一页失效，所以判断移动端浏览器类型针对原生safair进行处理，具体代码如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;#&amp;quot; id=&amp;quot;goBack&amp;quot; &amp;gt;返回&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var u = navigator.userAgent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var goBack=document.getElementById(&amp;quot;goBack&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//针对ios原生浏览器处理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if(!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/) &amp;amp;&amp;amp; /(Safari)/i.test(u))&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    goBack.setAttribute(&amp;quot;onclick&amp;quot;,&amp;quot;javascript:window.location=document.referrer;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;一、问题描述&quot;&gt;&lt;a href=&quot;#一、问题描述&quot; class=&quot;headerlink&quot; title=&quot;一、问题描述:&quot;&gt;&lt;/a&gt;一、问题描述:&lt;/h1&gt;&lt;p&gt;　　使用window.history.go(-1)或者window.history.back(-1)实现
    
    </summary>
    
    
      <category term="移动端开发" scheme="http://jyy12.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>chrome取消浏览器自动播放flash广告</title>
    <link href="http://jyy12.github.io/2016/02/24/chrome%E5%8F%96%E6%B6%88%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BEflash%E5%B9%BF%E5%91%8A/"/>
    <id>http://jyy12.github.io/2016/02/24/chrome取消浏览器自动播放flash广告/</id>
    <published>2016-02-24T06:33:44.000Z</published>
    <updated>2016-04-23T09:15:30.166Z</updated>
    
    <content type="html">&lt;h1 id=&quot;一、问题描述&quot;&gt;&lt;a href=&quot;#一、问题描述&quot; class=&quot;headerlink&quot; title=&quot;一、问题描述:&quot;&gt;&lt;/a&gt;一、问题描述:&lt;/h1&gt;&lt;p&gt;　　chrome 45及以上版本默认不自动播放flash，对于非自动播放的广告，chrome会在flash上悬浮一个播放按钮，点击后可播放。flash广告多使用覆盖a链接来实现，这种方法下无法点中chrome贴心提供的播放按钮。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 不自动播放的flash需满足以下两点： &lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;跨域&lt;/li&gt;
&lt;li&gt;尺寸小于398*298（未知此尺寸chrome是怎么得出的）&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt; acelan86文中解决思路（&lt;a href=&quot;https://github.com/acelan86/whatthefuck/wiki/chrome-45%E4%BB%A5%E4%B8%8A%E4%B8%8D%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE%22%E9%9D%9E%E5%BF%85%E8%A6%81%22flash%E7%9A%84%E4%B8%80%E7%A7%8D%E5%8F%AF%E8%83%BD%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文章链接&lt;/a&gt;）： &lt;/strong&gt;&lt;br&gt;在flash渲染的时候暂时把尺寸设置成大于398*298，在实际展现的时候在设置回来。&lt;br&gt;这里的尺寸有几个注意点： &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;不只是flash自己的尺寸而是真正展现的尺寸，有可能flash设置了足够大，但是它外面包含的容器overflow了，导致flash实际尺寸没有这么大，这样也是无法自动播放的 &lt;/li&gt;
&lt;li&gt;经过尝试，opacity:0 的flash只要尺寸足够大，也是可以自动播放的&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;另外发现当flash能过定位设置在布局之外，再定时显示也可解决flash自动播放的问题。&lt;/p&gt;
&lt;h1 id=&quot;二、解决方案：&quot;&gt;&lt;a href=&quot;#二、解决方案：&quot; class=&quot;headerlink&quot; title=&quot;二、解决方案：&quot;&gt;&lt;/a&gt;二、解决方案：&lt;/h1&gt;&lt;p&gt;1、同域下flash不受限制&lt;br&gt;2、设置大于398*298的尺寸，在渲染完成后改回小尺寸(渲染时间不可控，渲染影响因素不明)，参考acelan86上文中方法&lt;br&gt;3、通过定位设置一个很大的left值（使flash不可见，一定时间后改回正常值，时间不可控）&lt;/p&gt;
&lt;p&gt;其中2、3方法的具体写法：&lt;br&gt;（1）JS通过setTimeout设置&lt;br&gt;（2）针对webkit利用css animation设置：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@media screen and (-webkit-min-device-pixel-ratio:0)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .fixedFlashAutoStart&amp;#123;position:relative;left:99999px;-webkit-animation:fixedFlashAutoPlay 1ms linear 500ms 1 forwards;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @-webkit-keyframes fixedFlashAutoPlay&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        from &amp;#123;left:99999px;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        to &amp;#123;left:0;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;三、存在的问题：&quot;&gt;&lt;a href=&quot;#三、存在的问题：&quot; class=&quot;headerlink&quot; title=&quot;三、存在的问题：&quot;&gt;&lt;/a&gt;三、存在的问题：&lt;/h1&gt;&lt;p&gt;2、3定时重绘的方法非百分百有效，因所设置时间因素不可控（非flash下载时间，不确定是否是flash渲染时间）。&lt;/p&gt;
&lt;h5 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h5&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/acelan86/whatthefuck/wiki/chrome-45%E4%BB%A5%E4%B8%8A%E4%B8%8D%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE%22%E9%9D%9E%E5%BF%85%E8%A6%81%22flash%E7%9A%84%E4%B8%80%E7%A7%8D%E5%8F%AF%E8%83%BD%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;chrome-45以上不自动播放”非必要”flash的一种可能解决方案&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=10133771&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://news.ycombinator.com/item?id=10133771&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://code.google.com/p/chromium/codesearch#chromium/src/content/renderer/pepper/plugin_power_saver_helper.cc&amp;amp;sq=package:chromium&amp;amp;type=cs&amp;amp;l=87&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;chromium source code see constants&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://code.google.com/p/chromium/codesearch#chromium/src/content/renderer/pepper/plugin_instance_throttler_impl.cc&amp;amp;q=plugin_instance_throttler_impl&amp;amp;sq=package:chromium&amp;amp;type=cs&amp;amp;l=5&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;chromium source code See ShouldThrottleConten&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;一、问题描述&quot;&gt;&lt;a href=&quot;#一、问题描述&quot; class=&quot;headerlink&quot; title=&quot;一、问题描述:&quot;&gt;&lt;/a&gt;一、问题描述:&lt;/h1&gt;&lt;p&gt;　　chrome 45及以上版本默认不自动播放flash，对于非自动播放的广告，chrome会在flas
    
    </summary>
    
    
      <category term="前端开发" scheme="http://jyy12.github.io/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
</feed>
